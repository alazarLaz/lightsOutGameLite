{"ast":null,"code":"import _slicedToArray from\"/home/lazarus/projects/react/lights-out-lite/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _classCallCheck from\"/home/lazarus/projects/react/lights-out-lite/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/home/lazarus/projects/react/lights-out-lite/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/home/lazarus/projects/react/lights-out-lite/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/home/lazarus/projects/react/lights-out-lite/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import Cell from'./cell';import'./board.css';import{jsx as _jsx}from\"react/jsx-runtime\";var Board=/*#__PURE__*/function(_Component){_inherits(Board,_Component);var _super=_createSuper(Board);function Board(props){var _this;_classCallCheck(this,Board);_this=_super.call(this,props);_this.state={hasWon:false,board:_this.createBoard()};return _this;}_createClass(Board,[{key:\"createBoard\",value:function createBoard(){var board=[];for(var y=0;y<this.props.ncols;y++){var rows=[];for(var x=0;x<this.props.nrows;x++){rows.push(Math.random()>this.props.chanceLightStartsOn?true:false);}board.push(rows);}return board;}},{key:\"flipCellsAround\",value:function flipCellsAround(coord){var _this$props=this.props,ncols=_this$props.ncols,nrows=_this$props.nrows;var board=this.state.board;var _coord$split$map=coord.split(\"-\").map(Number),_coord$split$map2=_slicedToArray(_coord$split$map,2),y=_coord$split$map2[0],x=_coord$split$map2[1];function flipCell(y,x){// if this coord is actually on board, flip it\nif(x>=0&&x<ncols&&y>=0&&y<nrows){board[y][x]=!board[y][x];}}flipCell(y,x);flipCell(y+1,x);flipCell(y-1,x);flipCell(y,x+1);flipCell(y,x-1);var hasWon=this.state.board.every(function(row){return row.every(function(cell){return cell===false;});});this.setState({hasWon:hasWon,board:board});}},{key:\"render\",value:function render(){var _this2=this;if(this.state.hasWon){return/*#__PURE__*/_jsx(\"h1\",{children:\"You Won\"});}var lBoard=[];var _loop=function _loop(y){var row=[];var _loop2=function _loop2(x){row.push(/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Cell,{isLit:_this2.state.board[y][x],flipCellsAroundMe:function flipCellsAroundMe(){_this2.flipCellsAround(\"\".concat(y,\"-\").concat(x));}},\"\".concat(y,\"-\").concat(x))}));};for(var x=0;x<_this2.props.nrows;x++){_loop2(x);}lBoard.push(/*#__PURE__*/_jsx(\"tr\",{children:row}));};for(var y=0;y<this.props.ncols;y++){_loop(y);}return/*#__PURE__*/_jsx(\"table\",{className:\"Board\",children:/*#__PURE__*/_jsx(\"tbody\",{children:lBoard})});}}]);return Board;}(Component);Board.defaultProps={ncols:5,nrows:5,chanceLightStartsOn:0.25};export{Board as default};","map":{"version":3,"names":["React","Component","Cell","Board","props","state","hasWon","board","createBoard","y","ncols","rows","x","nrows","push","Math","random","chanceLightStartsOn","coord","split","map","Number","flipCell","every","row","cell","setState","lBoard","flipCellsAround","defaultProps"],"sources":["/home/lazarus/projects/react/lights-out-lite/src/board.js"],"sourcesContent":["import React, { Component } from 'react'\nimport Cell from './cell'\nimport './board.css'\n\nexport default class Board extends Component {\n    static defaultProps = \n    {\n        ncols: 5,\n        nrows: 5, \n        chanceLightStartsOn: 0.25\n    }\n    constructor(props) \n    {\n      super(props)\n    \n      this.state = {\n         hasWon : false,\n         board : this.createBoard(),\n      }\n    }\n\n\n    createBoard()\n    {\n        let board = []\n        for (let y = 0; y < this.props.ncols; y++) {\n            let rows = []\n            for (let x = 0; x < this.props.nrows; x++) {\n                rows.push(Math.random() > this.props.chanceLightStartsOn?true:false)\n                \n            }\n            board.push(rows)\n        }\n        return board\n    }\n\n\n    flipCellsAround(coord) \n    {\n        let {ncols, nrows} = this.props;\n        let board = this.state.board;\n        let [y, x] = coord.split(\"-\").map(Number);\n\n\n  function flipCell(y, x) \n  {\n    // if this coord is actually on board, flip it\n\n    if (x >= 0 && x < ncols && y >= 0 && y < nrows) {\n      board[y][x] = !board[y][x];\n    }\n  }\n  flipCell(y,x)\n  flipCell(y+1,x)\n  flipCell(y-1,x)\n  flipCell(y,x+1)\n  flipCell(y,x-1)\n\n\n  let hasWon = this.state.board.every((row)=>row.every((cell) => cell=== false))\n  this.setState({\n    hasWon,board\n  })\n\n}\n\n\n    \n  render() {\n    if(this.state.hasWon)\n    {\n        return(\n            <h1>You Won</h1>\n        )\n    }\n    let lBoard = []\n    for (let y = 0; y < this.props.ncols; y++) {\n        let row = []\n        for (let x = 0; x < this.props.nrows; x++) {\n            row.push(\n                <td><Cell key={`${y}-${x}`} isLit = {this.state.board[y][x]} flipCellsAroundMe = {()=>{this.flipCellsAround(`${y}-${x}`)}}/></td>\n            )\n        }\n        lBoard.push(<tr>{row}</tr>)\n    }\n    return (\n      <table className='Board'>\n        <tbody>\n            {lBoard}\n        </tbody>\n      </table>\n    )\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}